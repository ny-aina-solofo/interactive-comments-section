<main class="" id="comments-item-container">
    <p-card
        class="!bg-white !border-none !rounded-xl !shadow-none"
    >
        <div class="flex gap-4">
            <div
                class="bg-grey-100 rounded-lg px-3 py-3 text-purple-600 font-semibold h-25"
                id="votes"
            >
                <score [score]="comment_data.score" [data]="{
                    type: 'comment',
                    comment_id: comment_data.id,
                    username: comment_data.user.username
                }" />
            </div>
            
            <div class="flex-1 space-y-2" id="comments">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <img
                            [src]="'assets/' + comment_data.user.image.png"
                            [alt]="comment_data.user.username"
                            class="w-8 h-8 rounded-full"
                        />
    
                        <span class="font-semibold text-grey-800">{{comment_data.user.username}} </span>
                        <span class="font-normal text-grey-500">{{comment_data.createdAt}} </span>
                    </div>
                    <div class="flex flex-row gap-8">
                        <delete-dialog [data]="{
                            type: 'comment',
                            comment_id: comment_data.id,
                            username: comment_data.user.username
                        }"/>
                        <edit-dialog [data]="{
                            type: 'comment',
                            comment_id: comment_data.id,
                            content:comment_data.content,
                            username: comment_data.user.username
                        }" />
                        <div 
                            class="flex gap-2 text-sm font-bold text-purple-600 cursor-pointer" 
                            (click)="handleShowForm()"    
                        >
                            <img
                                src="assets/icon-reply.svg"
                                alt="icon-reply"
                                class="size-4"
                            />
                            Reply
                        </div>
                    </div>
                </div>
    
                <p class="text-grey-500 font-normal leading-relaxed">
                    {{comment_data.content}} 
                </p>
            </div>
        </div>
    </p-card>
    @if (store.activeReplyIdState() === comment_data.id) {
        <div class="mt-4">
            <app-form [data]="{
                type: 'reply',
                comment_id: comment_data.id,
                username: comment_data.user.username
            }"/>
        </div>
    }
</main>